<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,700|Roboto:400,900" rel="stylesheet">
     <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#" style="color: #fff;">GCloud</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          
        </ul>
        <div class="d-flex">
          <li class="nav-item">
            {% if user.is_authenticated %}
              <a href="">
                <button class="btn " type="button" style="color:#fff;">{{user.email}}</button>
              </a>
            {% endif %}
          </li>
        </div>
      </div>
    </div>
  </nav>
<style>
    input{
        border: 1px solid rgba(228, 230, 235,1);
    }
</style>
  <div class="container">
    <div class="row">
        <div class="col-md-1"></div>
        <form action="{% url 'mainapp:checkout' temp_card.id %}" method="post">
            {% csrf_token %}
            <div class="col-md-11">
                <div class="row">
                <div class="col-md-9">
                    <div style="border: 1px solid #e4e6eb;margin-top: 5%;">
                        <div style="padding: 3%;">
                            <h4>Billing Details</h4>
                            <p>GCloud collects and uses personal data in accordance with our Privacy Policy. By creating an account, you agree to our Terms and Conditions.</p>
                            <hr>
                        </div>
                        <div>
                            <div class="row">
                                <div class="col-md-5">
                                    <div style="margin-left: 10%;">
                                        <label>user name</label><br>
                                        <input class="form-control" type="text" value="{{name}}" style="width: 100%;" readonly>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div style="margin-left: 10%;">
                                        <label>Email</label><br>
                                        <input class="form-control" type="email" value="{{email}}" style="width: 100%;" readonly>
                                    </div>
                                </div>
                                <div class="col-md-10" >
                                    <div style="margin-left: 5%;">
                                        <label>Host name</label><br>
                                        <input class="form-control" type="text" id="textInput" oninput="displayText(this.value)" placeholder="Host Name" name="host" style="width: 100%;" required>
									    <p class="mt-3"  style="color:red;margin-left:20px;"><b id="displayArea"></b></p>
                                    </div>
                                </div>
                                <div class="col-md-10">
                                    <div style="margin-left: 5%;"> 
                                        <label>Address</label><br>
                                        <input class="form-control" type="text" placeholder="" name="address" style="width: 100%;">
                                    </div>
                                </div>
                                <div class="col-md-10">
                                    <div style="margin-left: 5%;">
                                        <label>Company name</label><br>
                                        <input class="form-control" type="text" placeholder="" name="company" style="width: 100%;">
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div style="margin-left: 10%;">
                                        <label>Country</label><br>
                                        <select id="country-dropdown" class="form-control" name="country">
                                            <option value="">Select Country</option>
                                            {% for country in countries %}
                                                <option value="{{ country.id }}">{{ country.name }}</option>
                                            {% endfor %}
                                        </select>
                                        <!-- <input class="form-control" type="text" placeholder="" name="country" style="width: 100%;"> -->
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div style="margin-left: 10%;">
                                        <label>State</label><br>
                                        <select id="state-dropdown" class="form-control" name="state">
                                            <option value="">Select State</option>
                                        </select>
                                        <!-- <input class="form-control" type="text" placeholder="" name="state" style="width: 100%;"> -->
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div style="margin-left: 10%;">
                                        <label>City</label><br>
                                        <select id="city-dropdown" class="form-control" name="city">
                                            <option value="">Select City</option>
                                        </select>
                                        <!-- <input class="form-control" type="text" placeholder="" name="city" style="width: 100%;"> -->
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div style="margin-left: 10%;">
                                        <label>pin code</label><br>
                                        <input class="form-control" type="number" placeholder="" name="pin" style="width: 100%;">
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="col-md-12  offset-md-9">
                                <button type="submit" class="btn btn-success form-btn" style="margin-bottom: 20px;">Save and Continue</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3" style="margin-top: 4%;border: 1px solid #e4e6eb;">
   

                    <div class="row" >
                        <div class="col-sm-7">
                            <div class="form-group">
                                <span class="form-label">Pro (Billed Monthly) <i class="fa fa-caret-down"></i></span>
                                  {% comment %} <a href="#" class="form-label">Save 20% with annual billing</a> {% endcomment %}
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <span class="form-label">{{temp_card.price}} /Month</span>
<!--                      						<span class="form-label">/Month</span>-->
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-9">
                            <div class="form-group">
                                <span class="form-label">Discount :</span>

                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                {% if percentage %}
                                <span class="form-label">{{percentage}} % </span>
                                {% else %}
                                <span class="form-label">0 % </span>
                                {% endif %}

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-9">
                            <div class="form-group">
                                <span class="form-label">Today you pay (INR)</span>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                {% if final_price %}
                                <span class="form-label">₹ {{final_price}}</span>
                                {% else %}
                                <span class="form-label">{{temp_card.price}}</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <!-- <div class="form-btn">
                        <button class="submit-btn btn-danger" type="submit">Confirm Payment</button>
                    </div> -->
                </form>
                <hr class="mt-0 line">
  {% if discount %}
  <div class="" id="dynamicContent" >
  <div class="alert alert-info alert-dismissible">
    <a type="button" class="btn-close"  href="{% url 'mainapp:delcoupen' temp_card.id  %}" ></a>
    <i class="fa-solid fa-tag" style="color: #1bfc17;font-size:22px;"></i>

      🎊🎉You Have Saved  <strong>₹ {{discount}}</strong>
  </div>
</div>
{% else %}
  {% if messages %}
      {% for msg in messages %}
  <div class="alert alert-danger alert-dismissible">
    <a type="submit" href="{% url 'mainapp:pay' temp_card.id %}" class="btn-close"  ></a>
     <span style="color:red;">{{msg}}</span>
  </div>
  {% endfor %}
  {% endif %}
                <form action="{% url 'mainapp:coupen' temp_card.id %}" method="POST">
                    {% csrf_token %}
                    <div class="row">
                        <span class="form-label">Enter Coupen Code</span>
                        <div class="col-sm-7">
                            <div class="form-group">
                                <input class="form-control" type="text" placeholder="" name="coupen_code" required>
                            </div>
                        </div>
                        <div class="col-sm-1">
                            <div class="form-btn">
                                <button class="btn submit-btn btn-danger" type="submit">Apply</button>
                            </div>
                        </div>
                    </div>
                </form>
                {% endif %}
            </div>
        </div>




                </div>
            </div>
            </div>
        
    </div>
  </div>
  <script>
	function displayText(text) {
		// Get the display area element
		var displayArea = document.getElementById("displayArea");
  
		// Check if the input field is empty
		if (text.trim() === "") {
			  // If empty, hide the display area
			  displayArea.style.display = "none";
		  } else {
			  // If not empty, show the display area and update its content
			  displayArea.style.display = "block";
			  displayArea.textContent = text +".bizz.online";
		  }
    }
  </script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('#country-dropdown').change(function() {
            var countryId = $(this).val();
            $.ajax({
                url: '/get_states/',
                data: {
                    'country_id': countryId
                },
                dataType: 'json',
                success: function(data) {
                    var stateDropdown = $('#state-dropdown');
                    stateDropdown.empty();
                    stateDropdown.append('<option value="">Select State</option>');
                    $.each(data.states, function(index, state) {
                        stateDropdown.append('<option value="' + state.id + '">' + state.name + '</option>');
                    });
                }
            });
        });

        $('#state-dropdown').change(function() {
            var stateId = $(this).val();
            $.ajax({
                url: '/get_cities/',
                data: {
                    'state_id': stateId
                },
                dataType: 'json',
                success: function(data) {
                    var cityDropdown = $('#city-dropdown');
                    cityDropdown.empty();
                    cityDropdown.append('<option value="">Select City</option>');
                    $.each(data.cities, function(index, city) {
                        cityDropdown.append('<option value="' + city.id + '">' + city.name + '</option>');
                    });
                }
            });
        });
    });
</script>

  </body>
</html>